datasource db {
  provider          = "postgres"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

generator client {
  provider      = "prisma-client-js"
  binaryTargets = "native"
}

// yarn rw g scaffold user;
// yarn rw g scaffold note;
// yarn rw g scaffold realm;
// yarn rw g scaffold serviceRate;

model User {
  id Int @id @unique @default(autoincrement())

  email               String    @unique
  hashedPassword      String    @default("")
  salt                String    @default("")
  resetToken          String?
  resetTokenExpiresAt DateTime?

  name  String @default("") // admin,editor
  roles String @default("guest") // admin,editor

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  notes Note[]
  realm Realm[]

  // rates     ServiceRate[]
  // jobs      JobSheet[]
  // stubs     PayStub[]
  ServiceRate ServiceRate[]
}

model Note {
  id      Int     @id @default(autoincrement())
  title   String
  content String?

  authorId Int?  @default(1)
  author   User? @relation(fields: [authorId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([authorId, id])
}

model Realm {
  id    Int    @id @default(autoincrement())
  title String

  address String?
  city    String?
  state   String?
  zip     Int?

  lat  String?
  long String?

  ownerId Int?  @default(1)
  owner   User? @relation(fields: [ownerId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([ownerId, id])
}

model ServiceRate {
  id   Int    @id @unique @default(autoincrement())
  uuid String @default(uuid())

  name String? // [value] [dollars] [unit] to [type] [material] with [modifiers]

  value     Int     @default(0) // 2/9.50
  currency  String? @default("USD") // dollars
  unit      String  @default("") // per SqFt,yard
  type      String  @default("") // to remove/install
  material  String  @default("") // LVT/carpet
  modifiers String? // pattern,softback

  description String? // further specificy with comments here

  ownerId Int?  @default(1)
  owner   User? @relation(fields: [ownerId], references: [id])

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt()

  @@unique([ownerId, id])
}

// model JobSheet {
//   id    Int     @id @default(autoincrement())
//   jobId String? @default(uuid())

//   startDate DateTime @default(now())
//   endDate   DateTime @default(now())
//   rep       String   @default("")

//   customerName    String  @default("")
//   customerPhone   String?
//   customerAddress String  @default("")

//   workType     String  @default("")
//   workMaterial String  @default("")
//   areas        String?
//   products     String?
//   subfloorType String  @default("")
//   transition   String?
//   notes        String? @default("")

//   markedAsComplete Boolean @default(false)

//   owner   User? @relation(fields: [ownerId], references: [id])
//   ownerId Int?  @default(1)

//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt
// }

// model PayStub {
//   id   Int    @id @unique @default(autoincrement())
//   uuid String @default(uuid())

//   payor        String?  @default("")
//   salesRep     String?  @default("")
//   jobName      String?  @default("")
//   paidDate     DateTime @default(now())
//   paidAmount   Int      @default(0)
//   paidCurrency String?  @default("USD")
//   checkNumber  Int

//   User   User? @relation(fields: [userId], references: [id])
//   userId Int?  @default(1)

//   createdAt DateTime @default(now())
//   updatedAt DateTime @updatedAt()
// }
